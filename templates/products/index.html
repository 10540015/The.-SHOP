{% extends 'layout.html' %}
{% block content %}
{% include 'navbar.html' %}
<div class="container" style="padding: 15px;">
  <div class="row">
    {% if brand %}
    {% for product in brand.items %}
    <div class="col-lg-3 col-md-6 col-sm-6">
      {% if product.discount > 0 %}
      <div class="product__discount__item">
        <div class="product__discount__item__pic set-bg"
          data-setbg="{{url_for('static', filename='images/' + product.image_1)}}">
          <div class="product__discount__percent">-{{ product.discount }}%</div>
          <ul class="product__item__pic__hover">
            <li><a href="{{url_for('single_page',id=product.id)}}"><i class="fa fa-retweet"></i></a></li>
            <li>
              <form action="{{url_for('AddCart')}}" method="post">
                <input type="hidden" name="product_id" value="{{product.id}}">
                <button type="submit"><i class="fa fa-shopping-cart"></i></button>
                <input type="hidden" name="quantity" value="1" min="1" max="20">
                {% set colors = product.colors.split(',') %}
                <div style="display: none;">
                  <select name="colors" id="colors">
                    {% for color in colors %}
                    {% set col = color.split(':') %}
                    <option value="{{col[0]}}">{{col[0] | capitalize }}</option>
                    {% endfor %}
                  </select>
                </div>
              </form>
            </li>
          </ul>
        </div>
        <div class="product__item__text">
          <h6><a href="{{url_for('single_page',id=product.id)}}">{{product.name}}</a></h6>
          <h5>${{product.price}}</h5>
        </div>
      </div>
      {% else %}
      <div class="product__item">
        <div class="product__item__pic set-bg" data-setbg="{{url_for('static', filename='images/' + product.image_1)}}">
          <ul class="product__item__pic__hover">
            <li><a href="{{url_for('single_page',id=product.id)}}"><i class="fa fa-retweet"></i></a></li>
            <li>
              <form action="{{url_for('AddCart')}}" method="post">
                <input type="hidden" name="product_id" value="{{product.id}}">
                <button type="submit"><i class="fa fa-shopping-cart"></i></button>
                <input type="hidden" name="quantity" value="1" min="1" max="20">
                {% set colors = product.colors.split(',') %}
                <div style="display: none;">
                  <select name="colors" id="colors">
                    {% for color in colors %}
                    {% set col = color.split(':') %}
                    <option value="{{col[0]}}">{{col[0] | capitalize }}</option>
                    {% endfor %}
                  </select>
                </div>
              </form>
            </li>
          </ul>
        </div>
        <div class="product__item__text">
          <h6><a href="{{url_for('single_page',id=product.id)}}">{{product.name}}</a></h6>
          <h5>${{product.price}}</h5>
        </div>
      </div>
      {% endif %}
    </div>
    {% endfor %}
  </div>

  <div class="row mt-4">
    <div class="col text-center">
      {% if brand.has_prev %}
      <a href="{{url_for('get_brand',id=get_brand.id, page=brand.prev_num)}}"
        class="btn btn-sm btn-outline-success">previus</a>
      {% endif %}
      {% if brand.total > 8 %}
      {% for page_num in brand.iter_pages(left_edge=1, right_edge=2, left_current=1,right_current=2) %}
      {% if page_num %}
      {% if brand.page == page_num %}
      <a href="{{url_for('get_brand',id=get_brand.id, page=page_num)}}" class="btn btn-sm btn-info">{{page_num}}</a>
      {% else %}
      <a href="{{url_for('get_brand',id=get_brand.id, page=page_num)}}"
        class="btn btn-sm btn-outline-success">{{page_num}}</a>
      {% endif %}
      {% else %}
      ...
      {% endif %}
      {% endfor %}
      {% endif %}
      {% if brand.has_next %}
      <a href="{{url_for('get_brand',id=get_brand.id, page=brand.next_num)}}"
        class="btn btn-sm btn-outline-success">next</a>
      {% endif %}
    </div>
  </div>
  <!--================= END OF BARNDS FORLOOP ================-->
  <div class="row">
    {% elif get_cat_prod %}
    {% for product in get_cat_prod.items %}
    <div class="col-lg-3 col-md-6 col-sm-6">
      {% if product.discount > 0 %}
      <div class="product__discount__item">
        <div class="product__discount__item__pic set-bg"
          data-setbg="{{url_for('static', filename='images/' + product.image_1)}}">
          <div class="product__discount__percent">-{{ product.discount }}%</div>
          <ul class="product__item__pic__hover">
            <li><a href="{{url_for('single_page',id=product.id)}}"><i class="fa fa-retweet"></i></a></li>
            <li>
              <form action="{{url_for('AddCart')}}" method="post">
                <input type="hidden" name="product_id" value="{{product.id}}">
                <button type="submit"><i class="fa fa-shopping-cart"></i></button>
                <input type="hidden" name="quantity" value="1" min="1" max="20">
                {% set colors = product.colors.split(',') %}
                <div style="display: none;">
                  <select name="colors" id="colors">
                    {% for color in colors %}
                    {% set col = color.split(':') %}
                    <option value="{{col[0]}}">{{col[0] | capitalize }}</option>
                    {% endfor %}
                  </select>
                </div>
              </form>
            </li>
          </ul>
        </div>
        <div class="product__item__text">
          <h6><a href="{{url_for('single_page',id=product.id)}}">{{product.name}}</a></h6>
          <h5>${{product.price}}</h5>
        </div>
      </div>
      {% else %}
      <div class="product__item">
        <div class="product__item__pic set-bg" data-setbg="{{url_for('static', filename='images/' + product.image_1)}}">
          <ul class="product__item__pic__hover">
            <li><a href="{{url_for('single_page',id=product.id)}}"><i class="fa fa-retweet"></i></a></li>
            <li>
              <form action="{{url_for('AddCart')}}" method="post">
                <input type="hidden" name="product_id" value="{{product.id}}">
                <button type="submit"><i class="fa fa-shopping-cart"></i></button>
                <input type="hidden" name="quantity" value="1" min="1" max="20">
                {% set colors = product.colors.split(',') %}
                <div style="display: none;">
                  <select name="colors" id="colors">
                    {% for color in colors %}
                    {% set col = color.split(':') %}
                    <option value="{{col[0]}}">{{col[0] | capitalize }}</option>
                    {% endfor %}
                  </select>
                </div>
              </form>
            </li>
          </ul>
        </div>
        <div class="product__item__text">
          <h6><a href="{{url_for('single_page',id=product.id)}}">{{product.name}}</a></h6>
          <h5>${{product.price}}</h5>
        </div>
      </div>
      {% endif %}
    </div>
    {% endfor %}
  </div>

  <div class="row mt-4">
    <div class="col text-center">
      {% if get_cat_prod.has_prev %}
      <a href="{{url_for('get_category',id=get_cat.id, page=get_cat_prod.prev_num)}}"
        class="btn btn-sm btn-outline-success">previus</a>
      {% endif %}
      {% if get_cat_prod.total > 8 %}
      {% for page_num in get_cat_prod.iter_pages(left_edge=1, right_edge=2, left_current=1,right_current=2) %}
      {% if page_num %}
      {% if get_cat_prod.page == page_num %}
      <a href="{{url_for('get_category',id=get_cat.id, page=page_num)}}" class="btn btn-sm btn-info">{{page_num}}</a>
      {% else %}
      <a href="{{url_for('get_category',id=get_cat.id, page=page_num)}}"
        class="btn btn-sm btn-outline-success">{{page_num}}</a>
      {% endif %}
      {% else %}
      ...
      {% endif %}
      {% endfor %}
      {% endif %}
      {% if get_cat_prod.has_next %}
      <a href="{{url_for('home', page=get_cat_prod.next_num)}}" class="btn btn-sm btn-outline-success">next</a>
      {% endif %}
    </div>
  </div>
  <!--========= END ELSE IF ===============-->
  <div class="row">
    {% else %}
    {% for product in products.items %}
    <div class="col-lg-3 col-md-6 col-sm-6">
      {% if product.discount > 0 %}
      <div class="product__discount__item">
        <div class="product__discount__item__pic set-bg"
          data-setbg="{{url_for('static', filename='images/' + product.image_1)}}">
          <div class="product__discount__percent">-{{ product.discount }}%</div>
          <ul class="product__item__pic__hover">
            <li><a href="{{url_for('single_page',id=product.id)}}"><i class="fa fa-retweet"></i></a></li>
            <li>
              <form action="{{url_for('AddCart')}}" method="post">
                <input type="hidden" name="product_id" value="{{product.id}}">
                <button type="submit"><i class="fa fa-shopping-cart"></i></button>
                <input type="hidden" name="quantity" value="1" min="1" max="20">
                {% set colors = product.colors.split(',') %}
                <div style="display: none;">
                  <select name="colors" id="colors">
                    {% for color in colors %}
                    {% set col = color.split(':') %}
                    <option value="{{col[0]}}">{{col[0] | capitalize }}</option>
                    {% endfor %}
                  </select>
                </div>
              </form>
            </li>
          </ul>
        </div>
        <div class="product__item__text">
          <h6><a href="{{url_for('single_page',id=product.id)}}">{{product.name}}</a></h6>
          <h5>${{product.price}}</h5>
        </div>
      </div>
      {% else %}
      <div class="product__item">
        <div class="product__item__pic set-bg" data-setbg="{{url_for('static', filename='images/' + product.image_1)}}">
          <ul class="product__item__pic__hover">
            <li><a href="{{url_for('single_page',id=product.id)}}"><i class="fa fa-retweet"></i></a></li>
            <li>
              <form action="{{url_for('AddCart')}}" method="post">
                <input type="hidden" name="product_id" value="{{product.id}}">
                <button type="submit"><i class="fa fa-shopping-cart"></i></button>
                <input type="hidden" name="quantity" value="1" min="1" max="20">
                {% set colors = product.colors.split(',') %}
                <div style="display: none;">
                  <select name="colors" id="colors">
                    {% for color in colors %}
                    {% set col = color.split(':') %}
                    <option value="{{col[0]}}">{{col[0] | capitalize }}</option>
                    {% endfor %}
                  </select>
                </div>
              </form>
            </li>
          </ul>
        </div>
        <div class="product__item__text">
          <h6><a href="{{url_for('single_page',id=product.id)}}">{{product.name}}</a></h6>
          <h5>${{product.price}}</h5>
        </div>
      </div>
      {% endif %}
    </div>
    {% endfor %}
  </div>

  <div class="row mt-4">
    <div class="col text-center">
      {% if products.has_prev %}
      <a href="{{url_for('home', page=products.prev_num)}}" class="btn btn-sm btn-outline-success">previus</a>
      {% endif %}
      {% if products.total> 8 %}
      {% for page_num in products.iter_pages(left_edge=1, right_edge=2, left_current=1,right_current=2) %}
      {% if page_num %}
      {% if products.page == page_num %}
      <a href="{{url_for('home', page=page_num)}}" class="btn btn-sm btn-success">{{page_num}}</a>
      {% else %}
      <a href="{{url_for('home', page=page_num)}}" class="btn btn-sm btn-outline-success">{{page_num}}</a>
      {% endif %}
      {% else %}
      ...
      {% endif %}
      {% endfor %}
      {% endif %}
      {% if products.has_next %}
      <a href="{{url_for('home', page=products.next_num)}}" class="btn btn-sm btn-outline-success">next</a>
      {% endif %}
    </div>
  </div>

  {% endif %}
</div>
</div>
{% endblock content %}